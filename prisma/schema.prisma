// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  id        Int      @id @default(autoincrement())
  fullname  String
  phone     String
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  Adress Adress[]

  Business Business[]
}

model Adress {
  id          Int      @id @default(autoincrement())
  adminId     Int
  admin       Admin    @relation(fields: [adminId], references: [id])
  street      String
  number      String
  city        String
  state       String
  postal_code String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("Adresses")
}

model Business {
  id                 Int     @id @default(autoincrement())
  isOpen             Boolean
  logo               String? @db.VarChar(100)
  adminId            Int
  admin              Admin   @relation(fields: [adminId], references: [id])
  cnpj               String? @unique @db.VarChar(18)
  name               String
  state_registration String  @db.VarChar(100)
  speciality Speciality[]

  BusinessHours BusinessHours[]
}

model BusinessHours {
  id         Int      @id @default(autoincrement())
  businessId Int
  business   Business @relation(fields: [businessId], references: [id])
  day        DaysOpen
  openHour   String   @db.VarChar(10)
  closeHour  String   @db.VarChar(10)

  @@unique([businessId, day])
}

enum Speciality {
  AFRICANA
  ACAI
  JAPONESA
  ARABE
  CHINESA
  BRASILEIRA
  ITALIANA
  MEXICANA
  VEGETARIANA
  VEGANA
  AMERICANA
  MEDITERRANEA
  PIZZARIA
  HAMBURGUERIA
  SUSHI
  FAST_FOOD
  INDIGENA
  TAILANDESA
  FRANCES
  COREANA
  INDIANA
  PERUANA
  CAJUN
  ESPANHOLA
  FUSION
  CONTEMPORANEA
  COSTELA
  SEAFOOD
  LANCHONETE
  GRILL
}

enum DaysOpen {
  MONDAY
  TUESDAY
  WEDNESDAY
  THURSDAY
  FRIDAY
  SATURDAY
  SUNDAY
}
